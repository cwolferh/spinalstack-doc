PuppetDB
========

PuppetDB collects data generated by Puppet. It allows to have a global overview of every node of the Spinal Stack deployment and their resource in a centralized place.

Requirements
------------

In Spinal Stack, PuppetDB is configured the following way :

  * The PuppetDB daemon runs on the install-server node with SSL disabled. Hence, it runs on 127.0.0.1:8080
  * Nodes still reach PuppetDB using SSL. SSL is terminated at the webserver level via a vhost listening on port 8081 that also serves as a proxy to 127.0.0.1:8080

Configuration of PuppetDB happens before step 1 since it needs to be ready for the really first run. Hence the SSL certificate needs to be present a deployment time.

.. warning::
    The deployer is expected to provide the file /etc/ssl/certs/puppetdb.pem via cloud-init, so it is present at boot time.


Configuration
-------------

====================== ==================================== =========================
Configuration          Description                          Default
====================== ==================================== =========================
puppetdb_server        The PuppetDB server URL              None
====================== ==================================== =========================

.. _PuppetDB: https://docs.puppetlabs.com/puppetdb/latest/
